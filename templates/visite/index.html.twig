{% extends "template.html.twig" %}
{% block body %}
	<div class="card mb-4">
		<div class="card-header" style="justify-content:center">
			<i class="fas fa-table me-1"></i>
			<h3>Liste des visites</h3>
			<a href="{{path('app_add_visite')}}">
				<button
					class="btn btn-success float-end">
					{# <i class="fa-solid fa-plus"></i> #}
					Nouvelle visite
				</button>
			</a>
		</div>
		<div class="card-body">
			<table id="datatablesSimple">
				<thead>
					<tr>
						{# <th>Type de visiteur</th> #}
						<th>Visiteur</th>
						<th>Employé visité</th>
						<th>Motif</th>
						<th>Etat</th>
						{#Age#}
						<th>Date</th>
						<th>Heure de fin</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tfoot>
					<tr>
						{# <th>Type de visiteur</th> #}
						<th>Visiteur</th>
						<th>Employé visité</th>
						<th>Motif</th>
						<th>Etat</th>
						<th>Date</th>
						<th>Heure de fin</th>
						<th>Actions</th>
					</tr>
				</tfoot>
				<tbody>
					{% for visite in visites %}
						<tr>
							<td>
								{% if visite.visiteurExterne is not null %}
									{{ visite.visiteurExterne }}
								{% elseif visite.employeVisiteur  is not null %}
									{{ visite.employeVisiteur}}
								{% endif %}
							</td>
							<td>{{visite.EmployeVisite}}
							</td>
							<td>{{visite.Motif}}
							</td>
							<td>
								{% if visite.isEtatVisite() %}
									<button style="border-width:0;color:white;background-color:#00B9E8">
										<i class="fa-solid fa-check"></i>
									</button>
								{% else %}
									<button class="btn-danger" style="border-width:0;color:white; margin: 2px;">
										<i class="fa-solid fa-x"></i>
									</button>
								{% endif %}

								<div class="modal-dialog modal-lg">
									<td>{{visite.DateVisite|date("d/m/Y")}}
									</td>
									<td>
										{% if visite.heureFin is defined %}
											{{ visite.heureFin|date('H:i') }}
										{% else %}
											En cours
										{% endif %}
									</td>
									<td>
										<a href="{{ path('app_update_visite', {'id': visite.id}) }}">
											<button style="background-color:green;border-width:0;color:white;">
												<i class="fa-regular fa-pen-to-square"></i>
											</button>
										</a>
									</td>
								</tr>
							{% endfor %}
						</tr>
					</td>
				</tbody>
			</tr>
		</tbody>
	</tbody>
</table></div></div>{% endblock %}
